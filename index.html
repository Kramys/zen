<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Zen the Tech — Matrix Mode</title>
<style>
  :root{
    --bg:#000;
    --green:#00ff95;
    --rain:#18ff62;
    --ghost:#0a3;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    background: var(--bg);
    color:#cfe;
    font-family: "Consolas","Courier New",monospace;
    overflow:hidden;
  }
  #matrix{
    position:fixed; inset:0; z-index:0; background:#000;
    display:block; /* important for some desktops */
  }
  .vignette::after{
    content:""; position:fixed; inset:0; z-index:1; pointer-events:none;
    background: radial-gradient(ellipse at center, #0000 30%, #0008 100%);
  }
  .poem{
    position:relative; z-index:2;
    max-width: 760px; margin: 6vh auto;
    padding: 36px 28px;
    text-align:center; line-height:1.75;
    color:#ccffdd;
    border:1px solid #094;
    border-radius:12px;
    background: rgba(0,20,0,.35);
    box-shadow: 0 0 0 1px #0a3 inset, 0 0 22px #072 inset, 0 0 24px rgba(0,255,153,.25);
    backdrop-filter: blur(2px);
  }
  h1{
    margin:0 0 14px 0; font-size: 34px; color: var(--green);
    text-shadow: 0 0 10px rgba(0,255,149,.55), 0 0 2px #0a3;
  }
  p{ white-space: pre-line; font-size: 12px; color:#cfffde; text-shadow: 0 0 4px rgba(0,255,149,.25); }
  .prompt{ margin-top:10px; font-size:12px; color:#8fefb7; opacity:.8; }
  .caret{ display:inline-block; width:8px; height:14px; background:var(--green); margin-left:6px; animation: blink 1s steps(1) infinite; box-shadow: 0 0 8px var(--green); vertical-align: -2px; }
  @keyframes blink { 50% { opacity: 0; } }
  .toolbar{
    position: fixed; right: 10px; bottom: 10px; z-index: 3; font-size: 12px; color:#9fe;
    background: rgba(0,0,0,.5); border:1px solid #094; border-radius: 8px; padding: 6px 10px;
  }
  .toolbar label{ cursor:pointer; user-select:none; }
  @media (max-width:520px){ .poem{ margin:4vh 12px; padding:24px 18px; } h1{ font-size:26px; } p{ font-size:16px; } }
</style>
</head>
<body class="vignette">

<canvas id="matrix" aria-hidden="true"></canvas>

<div class="poem" role="article" aria-labelledby="title">
  <h1 id="title">Zen the Tech</h1>
  <p>
Zen the tech, so calm, so bright,
His jacket’s on from morn till night.
He rides his bike with quiet flair,
And fixes IT bugs with gentle care.

He’s got a Staffy by his side,
A Monster Mango for the ride.
No Windows crash can steal his breath,
He laughs at the Blue Screen of Death.

At the end of a Youngtown day,
He powers down in his own way.
Rice for dinner, no champagne,
Tomorrow he’ll debug again.

Samsung Galaxy Tab in hand,
Technology at his command.
It hits the floor, he doesn’t frown,
Of course, he’s stuck a screen protector down!

Coke and Biscoff sweetened his day,
Oculus worlds not far away.
“Alexa,” he says, “play something tight.”
She blasts out static, “Close enough, right?”
  </p>
  <div class="prompt">wake up, Zen<span class="caret"></span></div>
</div>

<div class="toolbar">
  <label><input type="checkbox" id="reduce" /> Reduce motion</label>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const canvas = document.getElementById('matrix');
  const ctx = canvas.getContext('2d', { alpha: false });
  if(!ctx){
    // Fallback: static gradient if canvas blocked
    canvas.style.background = 'linear-gradient(#000,#022)';
    return;
  }

  // DPR-aware sizing for crisp, reliable drawing on desktop
  let w, h, cols, drops, fontSize;
  function sizeCanvas(){
    const dpr = Math.max(1, Math.min(3, window.devicePixelRatio || 1));
    const cssW = window.innerWidth;
    const cssH = window.innerHeight;
    canvas.width  = Math.floor(cssW * dpr);
    canvas.height = Math.floor(cssH * dpr);
    canvas.style.width  = cssW + 'px';
    canvas.style.height = cssH + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // scale drawing to CSS pixels

    fontSize = Math.max(14, Math.floor(cssW / 60));
    cols = Math.floor(cssW / fontSize);
    drops = new Array(cols).fill(0).map(()=> Math.floor(Math.random()*cssH/fontSize));
    ctx.font = fontSize + "px Consolas, monospace";
  }

  const glyphs = 'アカサタナハマヤラワ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  let reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const reduceToggle = document.getElementById('reduce');
  if(reduceToggle){ reduceToggle.checked = reduceMotion; reduceToggle.addEventListener('change', ()=> reduceMotion = reduceToggle.checked); }

  window.addEventListener('resize', sizeCanvas, { passive: true });
  sizeCanvas();

  function draw(){
    // translucent black rect to create trails
    ctx.fillStyle = 'rgba(0,0,0,0.08)';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    for(let i=0; i<cols; i++){
      const char = glyphs.charAt(Math.floor(Math.random()*glyphs.length));
      const x = i * fontSize;
      const y = drops[i] * fontSize;

      // tail
      ctx.fillStyle = '#0a3';
      ctx.fillText(char, x, y - fontSize);

      // head
      ctx.fillStyle = '#18ff62';
      ctx.fillText(char, x, y);

      // reset/drop logic
      const bottom = canvas.height / (ctx.getTransform().a); // convert to CSS px
      if(y > bottom && Math.random() > 0.975){ drops[i] = 0; }
      else { drops[i] += reduceMotion ? 0.5 : 1; }
    }
    requestAnimationFrame(draw);
  }
  draw();
});
</script>

</body>
</html>
